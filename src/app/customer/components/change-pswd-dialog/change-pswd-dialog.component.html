

<mat-toolbar color="primary">
    <mat-toolbar-row fxLayout="row" fxLayoutAlign="space-between center">
      <span>Change Password?</span>
      <span class="spacer"></span>
      <button class="mat-dialog-close" mat-icon-button mat-dialog-close >
        <mat-icon  >close</mat-icon>
      </button>
    </mat-toolbar-row>
</mat-toolbar>
  
<mat-dialog-content class="mat-typography">
    <form [formGroup]="changePasswordForm">
        <div fxFlex fxLayout="column">
            <mat-form-field  fxFlex style="width: 100%;">
                <mat-label>Enter email </mat-label>
                <input matInput formControlName="email"  type="email" required [type]="email ? 'email':'email'">
                
                <button type="button" mat-icon-button matSuffix (click)="email = !email" 
                      [attr.aria-label]="'Hide password'" [attr.aria-pressed]="email.toString()">
                     <mat-icon>{{ email ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>

                <mat-error *ngIf="changePasswordForm.controls.email.touched && changePasswordForm.controls.email.invalid">
                    <span *ngIf="changePasswordForm.controls.email.errors.required">This field is mandatory.</span>
                    <span *ngIf="changePasswordForm.controls.email.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
            <mat-form-field  fxFlex style="width: 100%;">
                <mat-label>New Password</mat-label>
                <input matInput formControlName="newPassword"  type="password" required [type]="newPassword ? 'password':'text'">
                
                <button type="button" mat-icon-button matSuffix (click)="newPassword = !newPassword" 
                      [attr.aria-label]="'Hide password'" [attr.aria-pressed]="newPassword.toString()">
                     <mat-icon>{{ newPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>

                <mat-error *ngIf="changePasswordForm.controls.newPassword.touched && changePasswordForm.controls.newPassword.invalid">
                    <span *ngIf="changePasswordForm.controls.newPassword.errors.required">This field is mandatory.</span>
                    <span *ngIf="changePasswordForm.controls.newPassword.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
       
            <mat-form-field fxFlex style="width: 100%;">
                <mat-label>Confirm Password</mat-label>
                <input matInput formControlName="confirmPassword" type="password" required [type]="confirmPassword ? 'password':'text'">
            
                <button type="button" mat-icon-button matSuffix (click)="confirmPassword = !confirmPassword" 
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="confirmPassword.toString()">
                    <mat-icon>{{ confirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            
                <mat-error *ngIf="changePasswordForm.controls.confirmPassword.touched && changePasswordForm.controls.confirmPassword.invalid">
                    <span *ngIf="changePasswordForm.controls.confirmPassword.errors.required">This field is mandatory.</span>
                </mat-error>
            
                <mat-hint *ngIf="changePasswordForm.controls.confirmPassword.touched && validateSumbit()">
                    <span>New password and confirm password does not match.</span>
                  </mat-hint>
                  
            </mat-form-field>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-raised-button color="primary" type="submit" (click)="handlePasswordChangeSubmit()" [disabled]="validateSumbit() ||  !(changePasswordForm.valid && changePasswordForm.dirty)">
        <mat-icon>save</mat-icon>update
    </button>

    <button mat-raised-button color="warn" mat-dialog-close >
        <mat-icon >cancel</mat-icon>close
    </button>
</mat-dialog-actions> 

